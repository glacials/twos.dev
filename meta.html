<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
  name="go-import"
  content="twos.dev
           git https://github.com/glacials/twos.dev"
/>
<meta
  name="go-source"
  content="twos.dev
           https://github.com/glacials/twos.dev
           https://github.com/glacials/twos.dev/tree/main{/dir}
           https://github.com/glacials/twos.dev/blob/main{/dir}/{file}#L{line}"
/>
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-2876079-11"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-2876079-11");

  
  if (document.location.hostname == "localhost") {
    const wsurl = "ws://localhost:8100/ws";
    const socket = new WebSocket(wsurl);
    socket.addEventListener("message", (event) => location.reload());
    socket.addEventListener("close", (event) => {
      console.log("backup initiating");
      setInterval(() => {
        const sock = new WebSocket("ws://localhost:8100/ws");
        sock.addEventListener("open", (event) => {
          location.reload();
        });
      }, 1000);
    });
  }
</script>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<meta name="description" content="Inside twos.dev" />
<link rel="icon" href="favicon.ico" />
<link
  rel="alternate"
  type="application/rss+xml"
  title="twos.dev"
  href="/feed.rss"
/>
<link
  rel="alternate"
  type="application/atom+xml"
  title="twos.dev"
  href="/feed.atom"
/>
<title>Inside twos.dev</title>
<link rel="stylesheet" href="/style.css" />

<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"
  integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC"
  crossorigin="anonymous"
/>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"
  integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja"
  crossorigin="anonymous"
></script>
<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"
  integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR"
  crossorigin="anonymous"
  onload="renderMathInElement(document.body);"
></script>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
<link rel="manifest" href="/site.webmanifest" />
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
<meta name="msapplication-TileColor" content="#da7987" />

  </head>

  <body>
    <div class="container">
      <header>
        <nav>
  <p style="text-align:center">
    ╭──────〔❨┅ ⑅ <a href="/">twos.dev</a> ⑅ ┅❩〕───────╮
  </p>
  <p style="text-align:center">
    <span class="arrow"></span>
    <a
      href="/"
      
      >Writing</a
    >
    <span class="arrow"></span>
    <a
      href="/cv.html"
      
      >CV</a
    >
    <span class="arrow"></span>
    <a
      href="/guide.html"
      
      >User Guide</a
    >
    <span class="arrow"></span>
    <a
      href="/software.html"
      
      >Software</a
    >
    <span class="arrow"></span>
  </p>
  <p style="text-align:center">
    
  </p>
</nav>

        
      </header>
      <article>
        
          <div style="text-align:center; background-color: var(--bg-c)">
            DRAFT
          </div>
        
        <html><head></head><body><h1>Inside twos.dev</h1>

<p>There's a unique advantage in working on twos.dev over anything I’ve worked on: it has just one developer, me. I can therefore design the developer experience in obnoxious and unintuitive ways to serve my peculiarities.</p>

<p>With this in mind, I decided to ruthlessly optimize for two goals:</p>

<ol>
<li>It must be easy to publish writing</li>
<li>As long as I'm alive, URLs must not change</li>
</ol>

<p>In some ways these goals work against each other; easy creation usually means easy destruction. So I divide my content into two types, warm and cold. Warm content is easy to create and edit, while cold content is hard to break.</p>

<h2>Warm Content</h2>

<p>I used to write drafts in my notes app then migrate to HTML when the piece became less amorphous; from then on I would write and edit directly in HTML. This was surprisingly refreshing as it allowed me to have wild one-off customizations for individual posts, but it had three problems:</p>

<ul>
<li>Writing HTML is a rough context switch (what was scribbling drafts on my phone became sitting at my computer in <code>$EDITOR</code>)</li>
<li>Writing was slowed down by cruft like <code><p></code> and <code><li></code></li>
<li>The reading experience can flow differently on a web page than in a notes app, leading to large rewrites after transferring</li>
</ul>

<p>To solve these issues and work towards my first goal, I needed tooling in the space between amorphous notes and strict HTML.</p>

<p>I first focused on changing my drafting app to something with more robust exporting tools. I found <a href="https://ia.net/writer">iA Writer</a>, which has been great to get my thoughts out quickly. It  looks nice and has tools for reducing filler words and cliches. Importantly, it stores writing as Markdown files in an online drive of my choosing.</p>

<h3>Shortcuts</h3>

<p>iOS and macOS ship with <a href="https://apps.apple.com/us/app/shortcuts/id1462947752">Shortcuts</a>, a no-code event-driven automation app. Using Shortcuts, I set up an automation that triggers when I switch away from the iA Writer app. The automation adds a 1-2 line YAML frontmatter section to each document, then pushes it to the <code>src/warm</code> directory in the twos.dev Git repository by invoking <a href="https://workingcopyapp.com">Working Copy</a>.</p>

<h3>Preprocessing</h3>

<p>On push, GitHub Actions builds the Markdown file into HTML with all the <a href="https://github.com/glacials/twos.dev/blob/main/cmd/build_document.go">right preprocessing</a> required to make it look like twos.dev. I use a small subset of <a href="https://pkg.go.dev/html/template"><code>html/template</code></a> to allow myself to put things like MP4 screen recordings and dark-mode-aware images into Markdown. This is also where the frontmatter from before is stripped and parsed into metadata inserted elsewhere on the page.</p>

<p>Technically at this point the page is now published, just not linked to from anywhere. I can see how it looks in the context of twos.dev, and send the link to friends who have offered to review.</p>

<h2>Cold Content</h2>

<p>There are 2-3 needs warm content doesn't cover: first, this odd pipeline that uses my phone for CI is not something I yet have high confidence in, so I'd like to limit its exposure.</p>

<p>Second, once in a while I need some wacky one-off piece of code code for a single post, like the CSS-only spectrum in <a href="autism.html">Anonymously Autistic</a> or the variable-width font requirements of <a href="dashes.html">Dashes</a>. iA Writer is great for prose, but when it's time to write code I need to be back in <code>$EDITOR</code>.</p>

<p>To accomplish these two needs I simply migrate the file out of iA Writer and into a plain directory meant for these pages that have "graduated":</p>

<html><head></head><body><pre tabindex="0" class="chroma"><code><span class="line"><span class="ln">1</span><span class="cl">git mv src/<span class="o">{</span>warm,cold<span class="o">}</span>/DOCUMENT.md
</span></span></code></pre></body></html>

<p>From here I may also take one final step of permanently converting the document to HTML if I find myself building more than a little code into it. This gives me autoformatting and syntax highlighting, and hardens the file against future changes to preprocessing.</p>

<html><head></head><body><pre tabindex="0" class="chroma"><code><span class="line"><span class="ln">1</span><span class="cl">twos.dev build
</span></span><span class="line"><span class="ln">2</span><span class="cl">mv dist/DOCUMENT.html src/cold/DOCUMENT.md
</span></span><span class="line"><span class="ln">3</span><span class="cl">git mv src/cold/DOCUMENT.<span class="o">{</span>md,html<span class="o">}</span>
</span></span></code></pre></body></html>

<p>This brings back the weight of editing prose in HTML, but these cases are the minority and at this point most of the writing is done anyway.</p>

<h4>Results</h4>

<p>Allowing myself this escape hatch is freeing. I’m more encouraged to write interactive or otherwise bespoke components, and twos.dev becomes consistent by default but I can break that consistency when I need (e.g. for a <a href="cv.html">CV</a>'s bicolumnar layout).</p>

<h2>On URLs Not Changing</h2>

<p>I use my website as a test bed for interesting technology. As a side effect, content has been lost over the years as it becomes hard to migrate to overhauled versions.</p>

<p>It so happens that by keeping my writing in Markdown or raw HTML/CSS, I make it easy to accomplish my second goal: <a href="https://www.w3.org/Provider/Style/URI">cool URLs don’t change</a>. I've removed the possibility that changing frontend or backend frameworks will leave my documents behind; Markdown is not going anywhere, and all the HTML files need to look decent is a header and footer. In the worst case scenario I'll simply <code>cp -r dist</code> to my next crazy system's web root.</p>

<p>If I’ve done things right, this web page will be accessible at twos.dev/meta.html for at least as long as I live.</p>
</body></html>
      </article>
      <footer>
        <hr />
        <p>
          
            
              &larr; <a href="/">twos.dev</a>
            
          
        </p>
        <p>
          <small>
            <i>
              
                source:
                <a
                  href="https://github.com/glacials/twos.dev/blob/main/src/warm/meta.md"
                  >src/warm/meta.md</a
                >
              
              <br />
              
                published
                2022 June
              
            </i>
          </small>
        </p>
      </footer>
    </div>
  </body>
</html>
