<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-2876079-11"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-2876079-11");

      
      if (document.location.hostname == "localhost") {
        const socket = new WebSocket("ws://localhost:8100/ws");
        socket.addEventListener("message", function (event) {
          location.reload();
        });
      }
    </script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta name="description" content="How I Write" />
    <link rel="icon" href="favicon.ico" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="twos.dev"
      href="/feed.rss"
    />
    <title>How I Write</title>
    <link rel="stylesheet" href="/style.css" />
  </head>

  <body>
    <div class="container">
      <header>
        
          &larr; <a href="/">twos.dev</a>
        
        
          /
          2022 June
          
        
      </header>
      <article><h1>How I Write</h1>

<p>twos.dev has a unique advantage over anything I’ve ever worked on: it has just one developer, me, so I can design the developer experience in obnoxious and unintuitive ways to serve my peculiarities.</p>

<p>With this in mind, I decided to ruthlessly optimize it around two goals:</p>

<ol>
<li>Make it easy to publish</li>
<li>URLs must never change</li>
</ol>

<p>To fulfill these goals I divide my content into two types, warm and cold. Warm content is easy to create and edit, while cold content is hard to break.</p>

<h2>Warm Content</h2>

<p>I previously wrote in my notes app while drafting, then manually migrated the draft to HTML when the piece started getting serious. From then until publish I would work directly in the HTML. This was surprisingly refreshing as it allowed me to have wild one-off customizations for individual posts, but it had three problems:</p>

<ul>
<li>Writing HTML has a higher context switch cost (sitting at my computer in my editor vs. scribbling quick drafts from my phone).</li>
<li>Writing was slowed down by cruft like <code>&lt;p&gt;</code> and <code>&lt;li&gt;</code></li>
<li>The reading experience may flow differently on a web page than in my notes app, leading to sometimes large rewrites right after transferring</li>
</ul>

<p>To solve these issues and work towards my first goal, I needed to close the gap in tooling between the draft phase and the publish phase.</p>

<p>I found <a href="https://ia.net/writer">iA Writer</a> to replace my note-taking app for draft writing. It gets my thoughts out quickly, has helpful tools for e.g. reducing filler words, and looks nice to boot. Importantly, it stores writing as Markdown files.</p>

<h3>Shortcuts</h3>

<p>iOS and macOS ship with a first-party app called <a href="https://apps.apple.com/us/app/shortcuts/id1462947752">Shortcuts</a>, which is a no-code, event-driven automation framework. Using Shortcuts, I set up an automation that triggers when I switch away from the iA Writer app. The automation adds a 1-2 line YAML frontmatter section to each document, then pushes it to the <code>src/warm</code> directory in the twos.dev Git repository by invoking <a href="https://workingcopyapp.com">Working Copy</a>.</p>

<h3>Preprocessing</h3>

<p>On push, GitHub Actions builds the Markdown file into HTML with all the <a href="https://github.com/glacials/twos.dev/blob/main/cmd/build_document.go">right preprocessing</a> required to make it look like twos.dev. I use a small subset of <a href="https://pkg.go.dev/html/template"><code>html/template</code></a> to allow myself to put things like MP4 screen recordings and dark-mode-aware images into Markdown. This is also where the frontmatter from before is stripped and parsed into metadata inserted elsewhere on the page.</p>

<p>Technically at this point the page is now published, just not linked to from anywhere. I can see how it looks in the context of twos.dev, and send the link to friends who have offered to review.</p>

<h2>Cold Content</h2>

<p>There are 2-3 needs warm content doesn&rsquo;t cover: first, this odd pipeline that uses my phone for CI is not something I yet have high confidence in, so I&rsquo;d like to limit its exposure.</p>

<p>Second, once in a while I need some wacky one-off piece of code code for a single post, like the CSS-only spectrum in <a href="autism.html">Anonymously Autistic</a> or the variable-width font requirements of <a href="dashes.html">Dashes</a>. I prefer to write code in <code>$EDITOR</code>, not iA Writer.</p>

<p>One great way to accomplish both of these needs is to simply remove the file from the iA Writer sync directory:</p>

<pre><code class="language-sh">git mv src/{warm,cold}/DOCUMENT.md
</code></pre>

<p>From here, I may also take one final step of permanently converting the document to HTML, if I find it will be easier to write code like that than embedding it in the Markdown.</p>

<pre><code class="language-sh">twos.dev build
git rm src/cold/DOCUMENT.md
cp dist/DOCUMENT.html src/cold/DOCUMENT.html
git add !$
</code></pre>

<p>This brings back the weight of editing prose in HTML, but by this point most of the writing is done.</p>

<h4>Results</h4>

<p>Allowing myself this escape hatch is freeing. I’m more encouraged to write interactive or otherwise bespoke components, and twos.dev becomes consistent by default but I can break that consistency when I need (e.g. my <a href="cv.html">CV</a>&rsquo;s bicolumnar layout)</p>

<h2>On URLs</h2>

<p>I use my website as a test bed for interesting technology. As a side effect, content has been lost over the years as it becomes hard to migrate to newly-overhauled versions.</p>

<p>It so happens that by keeping my writing in these two formats, Markdown and raw HTML/CSS, I make it easy to accomplish my second goal: <a href="https://www.w3.org/Provider/Style/URI">cool URLs don’t change</a>. I’ll never migrate JavaScript frameworks and be too lazy to move things forward, or move to a database-backed writing system while being unable to simply <code>cp -r</code> these files into the <code>public</code> directory.</p>

<p>If I’ve done things right, this web page will be accessible at twos.dev/meta.html until the day I die <a href="death.html">and then some</a>.</p>
</article>
      <footer>
        
          &larr; <a href="/">twos.dev</a>
        
        /
        
          <a href="https://github.com/glacials/twos.dev/blob/main/src/warm/meta.md">Source</a>
        
      </footer>
    </div>
  </body>
</html>
